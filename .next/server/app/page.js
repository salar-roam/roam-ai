(()=>{var e={};e.id=931,e.ids=[931],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},501:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>a.a,__next_app__:()=>p,originalPathname:()=>d,pages:()=>u,routeModule:()=>m,tree:()=>c}),r(908),r(1506),r(5866);var n=r(3191),s=r(8716),o=r(7922),a=r.n(o),i=r(5231),l={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>i[e]);r.d(t,l);let c=["",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,908)),"C:\\roam-together\\roam-ai\\app\\page.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,1506)),"C:\\roam-together\\roam-ai\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,5866,23)),"next/dist/client/components/not-found-error"]}],u=["C:\\roam-together\\roam-ai\\app\\page.tsx"],d="/page",p={require:r,loadChunk:()=>Promise.resolve()},m=new n.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/page",pathname:"/",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},9701:(e,t,r)=>{Promise.resolve().then(r.bind(r,4911))},3470:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,2994,23)),Promise.resolve().then(r.t.bind(r,6114,23)),Promise.resolve().then(r.t.bind(r,9727,23)),Promise.resolve().then(r.t.bind(r,9671,23)),Promise.resolve().then(r.t.bind(r,1868,23)),Promise.resolve().then(r.t.bind(r,4759,23))},3072:()=>{},4911:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>m});var n=r(326),s=r(7577),o={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},a=s.createContext&&s.createContext(o),i=["attr","size","title"];function l(){return(l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach(function(t){var n,s;n=t,s=r[t],(n=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(n))in e?Object.defineProperty(e,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[n]=s}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function d(e){var t=t=>{var r,{attr:n,size:o,title:a}=e,c=function(e,t){if(null==e)return{};var r,n,s=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}(e,i),d=o||t.size||"1em";return t.className&&(r=t.className),e.className&&(r=(r?r+" ":"")+e.className),s.createElement("svg",l({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,n,c,{className:r,style:u(u({color:e.color||t.color},t.style),e.style),height:d,width:d,xmlns:"http://www.w3.org/2000/svg"}),a&&s.createElement("title",null,a),e.children)};return void 0!==a?s.createElement(a.Consumer,null,e=>t(e)):t(o)}function p(e){var t;return(t={tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none"},child:[{tag:"path",attr:{opacity:"0.2",fillRule:"evenodd",clipRule:"evenodd",d:"M12 19C15.866 19 19 15.866 19 12C19 8.13401 15.866 5 12 5C8.13401 5 5 8.13401 5 12C5 15.866 8.13401 19 12 19ZM12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z",fill:"currentColor"},child:[]},{tag:"path",attr:{d:"M2 12C2 6.47715 6.47715 2 12 2V5C8.13401 5 5 8.13401 5 12H2Z",fill:"currentColor"},child:[]}]},e=>s.createElement(d,l({attr:u({},t.attr)},e),function e(t){return t&&t.map((t,r)=>s.createElement(t.tag,u({key:r},t.attr),e(t.child)))}(t.child)))(e)}function m(){let[e,t]=(0,s.useState)(""),[r,o]=(0,s.useState)([]),[a,i]=(0,s.useState)(!1),[l,c]=(0,s.useState)(null),u=(0,s.useRef)(null),d=async n=>{if(n.preventDefault(),!e.trim())return;let s={text:e,sender:"user"};o(e=>[...e,s]),i(!0),t("");try{let e={text:s.text,currentEventDraft:l,conversationHistory:r},t=await fetch("/api/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),n=await t.json();if(console.log("API Response:",n),t.ok){if("event_creation"===n.type){if(c(n.event),"incomplete"===n.status&&n.follow_up_questions&&n.follow_up_questions.length>0){let e=Array.isArray(n.follow_up_questions)&&n.follow_up_questions.length>0?n.follow_up_questions.join(" "):"Can you provide more details?";o(t=>[...t,{text:`I need a bit more information: ${e}`,sender:"ai"}])}else if("confirmation_pending"===n.status&&n.confirmation_message)o(e=>[...e,{text:n.confirmation_message??"",sender:"ai"}]);else if("complete"===n.status&&n.event){o(e=>[...e,{text:"Great! I have all the details. Publishing your event...",sender:"ai"}]);let e=await fetch("/api/publish",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({event:n.event})}),t=await e.json();e.ok?(o(e=>[...e,{text:n.user_facing_message??"Event published successfully! \uD83C\uDF89",sender:"ai"}]),c(null)):o(e=>[...e,{text:`Error publishing event: ${t.message??"Unknown error"}`,sender:"ai"}])}else o(e=>[...e,{text:n.user_facing_message??"I'm still processing your event details. Could you clarify?",sender:"ai"}])}else if("search_results"===n.type){if(Array.isArray(n.results)&&n.results.length>0){let e=n.results.map(e=>`**${e.title}**
Description: ${e.description||"N/A"}
Location: ${e.location||"N/A"}
Price: ${e.price_text||"Free"}
Host: ${e.host||"N/A"}
When: ${e.occurrences&&e.occurrences[0]?.start_ts?new Date(e.occurrences[0].start_ts).toLocaleString():"N/A"}`).join("\n\n");o(t=>[...t,{text:`Here are the events I found:

${e}`,sender:"ai"}])}else{let e="string"==typeof n.message?n.message:"No events found matching your search.";o(t=>[...t,{text:e,sender:"ai"}])}c(null)}else"message"===n.type?o(e=>[...e,{text:n.message??"An unknown message was received.",sender:"ai"}]):o(e=>[...e,{text:"An unexpected response was received from the AI.",sender:"ai"}]),c(null)}else{let e="message"in n&&"string"==typeof n.message?n.message:"Something went wrong.";o(t=>[...t,{text:`Error: ${e}`,sender:"ai"}]),c(null)}}catch(e){console.error("Frontend fetch error:",e),o(t=>[...t,{text:`Failed to connect to the assistant: ${e.message}`,sender:"ai"}]),c(null)}finally{i(!1)}};return n.jsx("main",{className:"flex min-h-screen flex-col items-center justify-between p-4 md:p-8",children:(0,n.jsxs)("div",{className:"flex flex-col items-center justify-center flex-grow w-full max-w-2xl mx-auto",children:[n.jsx("h1",{className:"text-4xl md:text-6xl font-bold text-white mb-8 text-center",children:"Roam AI"}),(0,n.jsxs)("div",{className:"w-full flex-grow bg-gray-800 rounded-lg p-4 mb-4 overflow-y-auto max-h-[60vh] custom-scrollbar",children:[0===r.length&&n.jsx("p",{className:"text-gray-400 text-center",children:"Type a description of your event or a search query!"}),r.map((e,t)=>n.jsx("div",{className:`mb-2 ${"user"===e.sender?"text-right":"text-left"}`,children:n.jsx("span",{className:`inline-block px-4 py-2 rounded-lg ${"user"===e.sender?"bg-blue-600 text-white":"bg-gray-700 text-white"}`,children:e.text.split("\n").map((e,t)=>n.jsx("p",{children:e},t))})},t)),a&&n.jsx("div",{className:"text-center mt-4",children:n.jsx(p,{className:"animate-spin inline-block text-white text-3xl"})}),n.jsx("div",{ref:u})," "]}),(0,n.jsxs)("form",{onSubmit:d,className:"w-full flex",children:[n.jsx("input",{type:"text",value:e,onChange:e=>t(e.target.value),placeholder:a?"Processing...":"Describe an event or search...",className:"flex-grow p-3 rounded-l-lg bg-gray-700 text-white border border-gray-600 focus:outline-none focus:border-blue-500",disabled:a}),n.jsx("button",{type:"submit",className:"px-6 py-3 bg-blue-600 text-white rounded-r-lg hover:bg-blue-700 transition-colors disabled:opacity-50",disabled:a,children:"Send"})]})]})})}},1506:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i,metadata:()=>a});var n=r(9510),s=r(7366),o=r.n(s);r(7633);let a={title:"Roam AI",description:"Your intelligent event assistant"};function i({children:e}){return n.jsx("html",{lang:"en",children:n.jsx("body",{className:`${o().className} bg-black text-white`,children:e})})}},908:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n});let n=(0,r(8570).createProxy)(String.raw`C:\roam-together\roam-ai\app\page.tsx#default`)},7633:()=>{}};var t=require("../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[480],()=>r(501));module.exports=n})();