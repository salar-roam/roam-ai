"use strict";(()=>{var e={};e.id=668,e.ids=[668],e.modules={145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},6249:(e,s)=>{Object.defineProperty(s,"l",{enumerable:!0,get:function(){return function e(s,t){return t in s?s[t]:"then"in s&&"function"==typeof s.then?s.then(s=>e(s,t)):"function"==typeof s&&"default"===t?s:void 0}}})},502:(e,s,t)=>{t.r(s),t.d(s,{config:()=>d,default:()=>l,routeModule:()=>p});var r={};t.r(r),t.d(r,{default:()=>u});var n=t(1802),a=t(7153),i=t(6249),o=t(9431);async function u(e,s){if("POST"!==e.method)return s.status(405).json({message:"Method Not Allowed"});let t=e.body.event;if(!t)return s.status(400).json({message:"Missing event data in request body"});try{let{data:e,error:r}=await o.O.from("events").insert([t]);if(r)return console.error("Supabase insert error:",r),s.status(500).json({message:"Failed to publish event",error:r.message});return s.status(200).json({message:"Event published successfully!",data:e})}catch(e){console.error("Server error publishing event:",e),s.status(500).json({message:"Internal server error.",error:e.message})}}let l=(0,i.l)(r,"default"),d=(0,i.l)(r,"config"),p=new n.PagesAPIRouteModule({definition:{kind:a.x.PAGES_API,page:"/api/publish",pathname:"/api/publish",bundlePath:"",filename:""},userland:r})},9431:(e,s,t)=>{t.d(s,{O:()=>i});let r=require("@supabase/supabase-js"),n=process.env.SUPABASE_URL,a=process.env.SUPABASE_ANON_KEY;console.log("DEBUG (lib/supabase.ts): Checking environment variables..."),console.log(`DEBUG (lib/supabase.ts): SUPABASE_URL is ${n?"PRESENT":"MISSING"}. Value starts with: ${n?n.substring(0,20)+"...":"N/A"}`),console.log(`DEBUG (lib/supabase.ts): SUPABASE_ANON_KEY is ${a?"PRESENT":"MISSING"}. Value starts with: ${a?a.substring(0,20)+"...":"N/A"}`),n&&a||console.error("Missing Supabase environment variables!");let i=(0,r.createClient)(n||"",a||"")},7153:(e,s)=>{var t;Object.defineProperty(s,"x",{enumerable:!0,get:function(){return t}}),function(e){e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE"}(t||(t={}))},1802:(e,s,t)=>{e.exports=t(145)}};var s=require("../../webpack-api-runtime.js");s.C(e);var t=s(s.s=502);module.exports=t})();